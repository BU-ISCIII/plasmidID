######## CIRCOS.CONF
####################

karyotype = PLASMID_KARYOTYPE

chromosome_units = 1000000
chromosomes_display_default = no
chromosomes = SAMPLE_SHOWN
chromosomes_color = /./ = lblue
z=100


#############################HIGHLIGHTS
<highlights>
z = 5
fill_color = vlred

<highlight>
file       = PLASMID_REPLISOME_PLASMIDFINDER
z=100
r1 = 0.90r
r0 = 0.69r
fill_color = vlyellow
</highlight>

<highlight>
z=101
file       = PLASMID_ANTIBIOTIC_RESISTANCE
r1 = 0.90r
r0 = 0.69r
fill_color = vlred
</highlight>

#<highlight>
#file       = PLASMID_IS_ISFINDER
#z=100
#r1 = 0.90r
#r0 = 0.69r
#fill_color = vlblue
#</highlight>

</highlights>

########################################PLOTS
<plots>

############### COVERAGE
<plot>
type = histogram
file = PLASMID_COVERAGE_GRAPH

color = black
r1 = 0.99r
r0 = 0.90r
extend_bin = no
min= 0
max= 500
thickness = 2
orientation = out

<axes>

<axis>
thickness = 1
color = lgrey
spacing = 50
</axis>

</axes>

<rules>

<rule>
condition = var(value) < 20
color     = lorange
thickness = 3
flow      = continue
</rule>

<rule>
condition = var(value) == 0
color     = red
thickness = 3
flow         = continue
</rule>

<rule>
condition = var(value) > 200
color     = green
thickness = 3
</rule>

</rules>

</plot>
############### /COVERAGE


############### TEXT_CDS_ABR
<plot>
type = text
color      = black
label_font = bold
label_size = 10p
file = PLASMID_ANTIBIOTIC_RESISTANCE
r1   = 0.85r+200p
r0   = 0.80r
orientation = center
show_links     = no

margin = 0u
label_parallel = no
padding  = 0p
rpadding = 0.05p
label_snuggle             = yes
max_snuggle_distance  = 5r
snuggle_sampling                = 1
snuggle_tolerance               = 10r
snuggle_link_overlap_test      = yes 
snuggle_link_overlap_tolerance = 10p

</plot>
############### /TEXT_CDS_ABR


############### TEXT_REPLISOME
<plot>
type = text
color      = black
label_font = bold
label_size = 10p
file = PLASMID_REPLISOME_PLASMIDFINDER
r1   = 0.85r+200p
r0   = 0.80r
orientation = center
show_links     = no

margin = 0u
label_parallel = no
padding  = 1p
rpadding = 2p
label_snuggle             = yes
max_snuggle_distance  = 5r
snuggle_sampling                = 2
snuggle_tolerance               = 1r
snuggle_link_overlap_test      = yes 
snuggle_link_overlap_tolerance = 20p

</plot>
############### /TEXT_REPLISOME


############### TEXT_CDS_CONTIG
<plot>

type = text
color      = black
label_font = default
label_size = 14p
file = PLASMID_CDS_CONTIG
r1   = 0.75r+100p
r0   = 0.75r
orientation = center
show_links     = yes
link_color     = purple

label_parallel = no
padding  = 2p
rpadding  = 2p
label_snuggle             = yes
max_snuggle_distance  = 6r
snuggle_sampling                = 10
snuggle_tolerance               = 3r
snuggle_link_overlap_test      = yes 
snuggle_link_overlap_tolerance = 10p

#<rules>
#<rule>
#condition  = var(value) =~ /CDS/
#label_size = 8p
#flow = continue
#</rule>
#</rules>

</plot>
############### /TEXT_CDS_CONTIG

############### CDS_CONTIGS_PROKKA
<plot>

type      = tile
file      = PLASMID_CDS_CONTIG
r1        = 0.75r
r0        = 0.70r
layers    = 2
layers_overflow = collapse
margin    = 10u
thickness = 20
padding   = 10p
rpadding = 2p
orientation      = in
stroke_thickness = 1
stroke_color     = vdgrey
color            = purple

</plot>
############### /CDS_CONTIGS_PROKKA

############### TEXT_CDS_DDB
<plot>
type = text
color      = black
label_font = default
label_size = 10p
file = PLASMID_CDS_DDBB
r1   = 0.69r+100p
r0   = 0.69r
orientation = center
show_links     = yes
link_color     = grey

label_parallel = no
padding  = 0p
label_snuggle             = yes
max_snuggle_distance  = 6r
snuggle_sampling                = 10
snuggle_tolerance               = 1r
snuggle_link_overlap_test      = yes 
snuggle_link_overlap_tolerance = 10p

#<rules>
#<rule>
#condition  = var(value) =~ /CDS/
#label_size = 7p
#flow = continue
#</rule>
#</rules>

</plot>
############### /TEXT_CDS_DDBB


############### CDS_PLASMIDS_DDBB
<plot>

type      = tile
file      = PLASMID_CDS_DDBB
r1        = 0.69r
r0        = 0.65r
layers    = 2
layers_overflow = collapse
margin    = 10u
thickness = 20
padding   = 2p
rpadding   = 2p
orientation      = in
stroke_thickness = 1
stroke_color     = dgrey
color            = grey

</plot>
############### /CDS_PLASMIDS_DDBB

############### TEXT_CONTIG
<plot>
type = text
label_font = bold
label_size = 20p
file = PLASMID_CONTIGS
r1   = 0.60r+150p
r0   = 0.60r
orientation = out
show_links     = yes
label_parallel = yes
padding  = 20p
rpadding = 2p
margin = 15p
label_snuggle             = yes
max_snuggle_distance  = 10r
snuggle_sampling                = 10
snuggle_tolerance               = 5r
snuggle_link_overlap_test      = yes 
snuggle_link_overlap_tolerance = 3p

<rules>

<rule>
condition  = var(id) =~ /(\d+)(\d+)(\d*)/
color      = eval(my @match = "var(id)" =~ /(\d+)(\d+)(\d*)/; sprintf("paired-12-qual-%d_a%d", remap_int($match[0],1,9,1,12),remap_int($match[1],1,9,5,3 )))
flow = continue
</rule>

<rule>
condition  = var(id) =~ /(\d+)(\d+)(\d*)/
link_color      = eval(my @match = "var(id)" =~ /(\d+)(\d+)(\d*)/; sprintf("paired-12-qual-%d_a%d", remap_int($match[0],1,9,1,12),remap_int($match[1],1,9,5,3 )))
flow = continue
</rule>

<rule>
condition = var(size) < 0.2kb
show     = no
</rule>

</rules>
</plot>
############### /TEXT_CONTIG

############### CONTIGS SPADES ALL
<plot>
type      = tile
file      = PLASMID_CONTIGS
r1        = 0.60r
r0        = 0.50r
layers    = 5
margin    = 5u
thickness = 30
padding   = 5
layers_overflow = collapse
orientation      = in
stroke_thickness = 0
stroke_color     = grey
color            = grey

<rules>

<rule>
condition  = var(id) =~ /(\d+)(\d+)(\d*)/
color      = eval( my @match = "var(id)" =~ /(\d+)(\d+)(\d*)/; sprintf("paired-12-qual-%d_a%d", remap_int($match[0],1,9,1,12),remap_int($match[1],1,9,5,3 )))
flow = continue
</rule>


<rule>
condition = var(size) < 0.2kb
show     = no
</rule>


</rules>
</plot>
############### /CONTIGS SPADES ALL


############## TEXT_CONTIG COMPLETE
<plot>
type = text
#color      = black
label_font = bold
label_size = 20p
file = PLASMID_CONTIGS_COMPLETE
r1   = 0.45r+150p
r0   = 0.45r
orientation = out
show_links     = yes
label_parallel = yes
padding  = 20p
rpadding = 2p
margin = 15p
label_snuggle             = yes
max_snuggle_distance  = 10r
snuggle_sampling                = 10
snuggle_tolerance               = 5r
snuggle_link_overlap_test      = yes 
snuggle_link_overlap_tolerance = 3p

<rules>

<rule>
condition  = var(value) =~ /(\d+)(\d+)(\d*)/
color      = eval(my @match = "var(value)" =~ /(\d+)(\d+)(\d*)/; sprintf("paired-12-qual-%d_a%d", remap_int($match[0],1,9,1,12),remap_int($match[1],1,9,5,3 )))
flow = continue
</rule>


<rule>
condition  = var(id) =~ /(\d+)(\d+)(\d*)/
link_color      = eval(my @match = "var(id)" =~ /(\d+)(\d+)(\d*)/; sprintf("paired-12-qual-%d_a%d", remap_int($match[0],1,9,1,12),remap_int($match[1],1,9,5,3 )))
flow = continue
</rule>

<rule>
condition = var(size) < 0.2kb
show     = no
flow = continue
</rule>

</rules>
</plot>
############### /TEXT_CONTIG COMPLETE



############### CONTIGS SPADES COMPLETE
<plot>
type      = tile
file      = PLASMID_CONTIGS_COMPLETE
r1        = 0.45r
r0        = 0.10r
layers    = 10
margin    = 5u
thickness = 30
padding   = 5
layers_overflow = grow
orientation      = in
stroke_thickness = 0
stroke_color     = grey

<rules>

<rule>

condition  = var(value) =~ /(\d+)(\d+)(\d*)/
color      = eval( my @match = "var(value)" =~ /(\d+)(\d+)(\d*)/; sprintf("paired-12-qual-%d_a%d", remap_int($match[0],1,9,1,12),remap_int($match[1],1,9,5,3 )))
flow = continue
</rule>


<rule>
condition = var(size) < 0.2kb
show     = no
flow = continue
</rule>

</rules>
</plot>
############### /CONTIGS SPADES COMPLETE


</plots>



######## IDEOGRAM
#################
<ideogram>
z=5000
show = yes

<spacing>
default = 10u
#when representing witout scaling
#default = 1000u
break = 10u
</spacing>

chromosomes_color = dblue
stroke_color = blue

radius    = 0.93r
thickness = 30p
fill      = yes

show_label = yes
label_color    = dgrey
label_center   = yes
label_font = bold
label_radius = 0.1r
#label_radius = dims(ideogram,radius_inner)
#(dims(ideogram,radius_inner) + dims(ideogram,radius_outer))/2

label_size = 50
label_parallel = yes

</ideogram>

######## TICKS
##############

show_ticks = yes
show_tick_labels = yes

<ticks>
radius = dims(ideogram,radius_outer)
color = black
thickness = 2p
labe_offset = 0p

#multiplier = 0.001

<tick>
#spacing = 1000u
rspacing       = 0.1
spacing_type   = relative
skip_first_label = yes
skip_last_label = no
size = 5p
show_label = yes
label_size = 20p
#label_relative = yes
suffix = " bp"
#rdivisor = ideogram
format = %d
rmultiplier    = 1
</tick>



<tick>
spacing = 2000u
multiplier = 0.001
size = 5p
show_label = yes
skip_first_label = yes
label_size = 15p
labe_offset = 0p
suffix = " kb"
format = %d
</tick>

</ticks>

########COLORS
##############
<<include etc/colors_fonts_patterns.conf>>


########HOUSEKEEPING
####################
<<include etc/housekeeping.conf>>

########IMAGE
#############
<image>
dir   = OUTPUTDIR
#dir  = conf(configdir)
file  = IMAGENAME_SAMPLE_PLASMID
png   = yes
svg   = no
# radius of inscribed circle in image
radius         = 1900p
# by default angle=0 is at 3 o'clock position
angle_offset      = -90
#angle_orientation = counterclockwise
auto_alpha_colors = yes
auto_alpha_steps  = 5
</image>
